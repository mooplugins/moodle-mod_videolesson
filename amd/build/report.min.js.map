{"version":3,"file":"report.min.js","sources":["../src/report.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Report functionality for videolesson plugin\n *\n * @module     mod_videolesson/report\n * @copyright  2022-2026 BitKea Technologies LLP\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {secondsToMinutesAndSeconds} from 'mod_videolesson/script';\n\nconst InitializeCharts = () => {\n    const elements = document.querySelectorAll('.mod-videolesson-chart');\n    elements.forEach(element => {\n        const rangesAttribute = element.getAttribute('data-ranges');\n        const rangesArray = JSON.parse(rangesAttribute.replace(/'/g, '\"'));\n        const vduration =  element.getAttribute('data-vduration');\n        generateChart(element, rangesArray, vduration);\n    });\n};\n\nconst generateChart = (chart, data, vduration) => {\n    let opacity = 1;\n    data.forEach(function (range) {\n        let div = document.createElement('div');\n        let left = (range[0] / vduration) * 100;\n        let width = (range[1] / vduration) * 100;\n        let startPoint = (left / 100) * vduration;\n        let endPoint = startPoint + (width / 100) * vduration;\n        startPoint = secondsToMinutesAndSeconds(Math.abs(startPoint));\n        endPoint = secondsToMinutesAndSeconds(Math.abs(endPoint));\n        div.setAttribute(\"title\", endPoint + ' - ' + endPoint);\n        width -= left;\n        div.style.left = Math.abs(left) + '%';\n        div.style.width = Math.abs(width) + '%';\n        div.style.opacity = opacity;\n        chart.appendChild(div);\n    });\n};\n\nexport const init = () => {\n    InitializeCharts();\n};\n"],"names":["generateChart","chart","data","vduration","forEach","range","div","document","createElement","left","width","startPoint","endPoint","Math","abs","setAttribute","style","opacity","appendChild","querySelectorAll","element","rangesAttribute","getAttribute","rangesArray","JSON","parse","replace"],"mappings":";;;;;;;;MAmCMA,cAAgB,CAACC,MAAOC,KAAMC,aAEhCD,KAAKE,SAAQ,SAAUC,WACfC,IAAMC,SAASC,cAAc,OAC7BC,KAAQJ,MAAM,GAAKF,UAAa,IAChCO,MAASL,MAAM,GAAKF,UAAa,IACjCQ,WAAcF,KAAO,IAAON,UAC5BS,SAAWD,WAAcD,MAAQ,IAAOP,UAC5CQ,YAAa,sCAA2BE,KAAKC,IAAIH,aACjDC,UAAW,sCAA2BC,KAAKC,IAAIF,WAC/CN,IAAIS,aAAa,QAASH,SAAW,MAAQA,UAC7CF,OAASD,KACTH,IAAIU,MAAMP,KAAOI,KAAKC,IAAIL,MAAQ,IAClCH,IAAIU,MAAMN,MAAQG,KAAKC,IAAIJ,OAAS,IACpCJ,IAAIU,MAAMC,QAbA,EAcVhB,MAAMiB,YAAYZ,uBAIN,KA5BCC,SAASY,iBAAiB,0BAClCf,SAAQgB,gBACPC,gBAAkBD,QAAQE,aAAa,eACvCC,YAAcC,KAAKC,MAAMJ,gBAAgBK,QAAQ,KAAM,MACvDvB,UAAaiB,QAAQE,aAAa,kBACxCtB,cAAcoB,QAASG,YAAapB"}